<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Calculate modes with the AMS3D algorithm for a lidar point...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for calculate_modes_flexible {crownsegmentr}"><tr><td>calculate_modes_flexible {crownsegmentr}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Calculate modes with the AMS3D algorithm for a lidar point cloud of a forest</h2>

<h3>Description</h3>

<p>Employs the 3D adaptive mean shift algorithm (Ferraz et al., 2016) to
estimate the mode of each point in a point cloud which is assumed to contain
trees. In this context the mode is a theoretical &quot;center of mass&quot; of a tree
crown point cloud, that is usually located shortly below the crown apex.
</p>


<h3>Usage</h3>

<pre>
calculate_modes_flexible(
  coordinate_table,
  min_point_height_above_ground,
  ground_height_data,
  crown_diameter_to_tree_height_data,
  crown_height_to_tree_height_data,
  centroid_convergence_distance,
  max_num_centroids_per_mode,
  also_return_centroids,
  show_progress_bar
)

calculate_modes_normalized(
  coordinate_table,
  min_point_height_above_ground,
  crown_diameter_to_tree_height,
  crown_height_to_tree_height,
  centroid_convergence_distance,
  max_num_centroids_per_mode,
  also_return_centroids,
  show_progress_bar
)

calculate_modes_terraneous(
  coordinate_table,
  min_point_height_above_ground,
  ground_height_grid_data,
  crown_diameter_to_tree_height,
  crown_height_to_tree_height,
  centroid_convergence_distance,
  max_num_centroids_per_mode,
  also_return_centroids,
  show_progress_bar
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>coordinate_table</code></td>
<td>
<p>A <code>data.frame</code>. The first three columns are
treated as the x-, y-, and z-coordinates of an airborne lidar point
cloud.</p>
</td></tr>
<tr valign="top"><td><code>min_point_height_above_ground</code></td>
<td>
<p>A single positive number. The minimum
point height above ground at which the function will calculate modes.</p>
</td></tr>
<tr valign="top"><td><code>ground_height_data</code></td>
<td>
<p>A list containing either a single ground height
value (named &quot;value&quot;) or a set of elements that make up a ground height
raster covering the whole area of the point cloud. Such a set has to
consist of the named elements described in the section &quot;Raster argument
structure&quot; below.</p>
</td></tr>
<tr valign="top"><td><code>crown_diameter_to_tree_height_data</code></td>
<td>
<p>A list containing either a single
numeric value (named &quot;value&quot;) or the data for a raster of values (see
section &quot;Raster argument structure&quot; below for how the raster data has to
be stored in the list). The values indicate the estimated ratio of crown
diameter to tree height for the whole plot or individual raster pixels
respectively.</p>
</td></tr>
<tr valign="top"><td><code>crown_height_to_tree_height_data</code></td>
<td>
<p>A list containing either a single
numeric value (named &quot;value&quot;) or the data for a raster of values (see
section &quot;Raster argument structure&quot; below for how the raster data has to
be stored in the list). The values indicate the estimated ratio of crown
height to tree height for the whole plot or individual raster pixels
respectively.</p>
</td></tr>
<tr valign="top"><td><code>centroid_convergence_distance</code></td>
<td>
<p>Numeric Scalar. Distance at which it is
assumed that subsequently calculated centroids have converged to the
nearest mode.</p>
</td></tr>
<tr valign="top"><td><code>max_num_centroids_per_mode</code></td>
<td>
<p>Integer Scalar. Maximum number of
centroids calculated before the search for the nearest mode is aborted.</p>
</td></tr>
<tr valign="top"><td><code>also_return_centroids</code></td>
<td>
<p>Boolean Scalar. Should centroid coordinates be
returned as well?</p>
</td></tr>
<tr valign="top"><td><code>show_progress_bar</code></td>
<td>
<p>Boolean Scalar. Should a progress bar be shown
during the computation?</p>
</td></tr>
<tr valign="top"><td><code>crown_diameter_to_tree_height, crown_height_to_tree_height</code></td>
<td>
<p>Single
numbers. Crown diameter and crown height to tree height ratios of the
trees expected to be found in the point cloud.</p>
</td></tr>
<tr valign="top"><td><code>ground_height_grid_data</code></td>
<td>
<p>A list containing a set of elements that make
up a ground height raster covering the whole area of the point cloud.
The set has to consist of the named elements described in the section
&quot;Raster argument structure&quot; below.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with either one or two elements. The first element (named
&quot;mode_coordinates&quot;) contains the modes for all points in the
<code>coordinate_table</code>. The modes are stored in a <code>data.frame</code>
with three columns that hold the x-, y-, and z-coordinates and they are
stored in the same order as their respective points in the
<code>coordinate_table</code>.</p>
<pre>The second element (named "centroid_coordinates") is only present if
\code{also_return_centroids} was set to \code{TRUE} and contains the
centroids calculated during the mode finding process. The centroids are
stored in a \code{data.frame} with xyz-coordinate columns like the
modes. To enable grouping of these centroids by the point they belong
to, there is one additional column (named "point_index") which holds row
indices of the corresponding points in the \code{coordinate_table}.
</pre>


<h3>Functions</h3>


<ul>
<li> <p><code>calculate_modes_flexible</code>: Can take either a single value or
raster data for both the ground height and the
<code>crown_diameter_to_tree_height</code> and
<code>crown_height_to_tree_height</code> parameters.
</p>
</li>
<li> <p><code>calculate_modes_terraneous</code>: Use a ground height raster to find
modes in a non-normalized point cloud.
</p>
</li></ul>


<h3>Raster argument structure</h3>

<p>Raster data has to be passed as a list comprising the following named
elements:
</p>

<ul>
<li><p> values: Numeric vector holding the values.
</p>
</li>
<li><p> num_rows: Integer number indicating the number of rows.
</p>
</li>
<li><p> num_cols: Integer number indicating the number of columns.
</p>
</li>
<li><p> x_min: Number indicating the lowest x coordinate covered.
</p>
</li>
<li><p> x_max: Number indicating the largest x coordinate covered.
</p>
</li>
<li><p> y_min: Number indicating the lowest y coordinate covered.
</p>
</li>
<li><p> y_max: Number indicating the largest y coordinate covered.
</p>
</li></ul>



<h3>References</h3>

<p>Ferraz, A., S. Saatchi, C. Mallet, and V. Meyer (2016)
<em>Lidar detection of individual tree size in tropical forests</em>.
Remote Sensing of Environment 183:318â€“333.
<a href="https://doi.org/10.1016/j.rse.2016.05.028">https://doi.org/10.1016/j.rse.2016.05.028</a>.
</p>

<hr /><div style="text-align: center;">[Package <em>crownsegmentr</em> version 0.4.4 <a href="00Index.html">Index</a>]</div>
</body></html>
